# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- develop

pool:
  vmImage: ubuntu-latest

steps:
- task: UseDotNet@2
  displayName: Use .NET 6.0
  inputs:
    packageType: 'sdk'
    version: '6.0.x'

- script: dotnet tool restore
  displayName: 'Restore Tools'

- task: DotNetCoreCLI@2
  displayName: DotNet Publish
  inputs:
    command: 'publish'
    # publishWebProjects: false
    projects: 'src/DemoBlazorApp/DemoBlazorApp.csproj'
    arguments: '--configuration Release --output $(Build.ArtifactStagingDirectory)/DemoBlazorApp'
    buildProperties: 

- task: Bash@3
  displayName: List DemoBlazorApp Artifact
  inputs:
    targetType: 'inline'
    script: |
      # Write your commands here
      
      ls $(Build.ArtifactStagingDirectory)/DemoBlazorApp

- task: PublishBuildArtifacts@1
  displayName: Publish Artifacts
  inputs:
    ArtifactName: 'DemoBlazorApp'
    PathtoPublish: '$(Build.ArtifactStagingDirectory)/DemoBlazorApp/'
